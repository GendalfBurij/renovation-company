{"ast":null,"code":"// components/chat/ChatWidget.jsx\nimport React,{useState}from'react';import'./ChatWidget.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatWidget=()=>{const[open,setOpen]=useState(false);const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[loading,setLoading]=useState(false);const handleSend=async()=>{if(!input.trim())return;const userMessage={sender:'user',text:input};setMessages([...messages,userMessage]);setInput('');setLoading(true);try{const response=await fetch(\"/api/...\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:input})});const data=await response.json();const botMessage={sender:'bot',text:data.response};setMessages(prev=>[...prev,botMessage]);}catch(err){setMessages(prev=>[...prev,{sender:'bot',text:'Error del servidor. IntÃ©ntalo mÃ¡s tarde.'}]);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"chat-widget\",children:open?/*#__PURE__*/_jsxs(\"div\",{className:\"chat-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\xBFEn qu\\xE9 podemos ayudarte?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpen(false),children:\"\\u2716\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-body\",children:[messages.map((msg,i)=>/*#__PURE__*/_jsx(\"div\",{className:`chat-message ${msg.sender}`,children:msg.text},i)),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"chat-message bot\",children:\"Escribiendo...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>e.key==='Enter'&&handleSend(),placeholder:\"Escribe tu pregunta...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,children:\"\\u27A4\"})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"chat-toggle\",onClick:()=>setOpen(true),children:\"\\uD83D\\uDCAC\"})});};export default ChatWidget;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ChatWidget","open","setOpen","messages","setMessages","input","setInput","loading","setLoading","handleSend","trim","userMessage","sender","text","response","fetch","method","headers","body","JSON","stringify","message","data","json","botMessage","prev","err","className","children","onClick","map","msg","i","type","value","onChange","e","target","onKeyDown","key","placeholder"],"sources":["/Users/fhilipmazein/renovation-company/frontend/src/components/chat/ChatWidget.jsx"],"sourcesContent":["// components/chat/ChatWidget.jsx\nimport React, { useState } from 'react';\nimport './ChatWidget.css';\n\nconst ChatWidget = () => {\n  const [open, setOpen] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n    const userMessage = { sender: 'user', text: input };\n    setMessages([...messages, userMessage]);\n    setInput('');\n    setLoading(true);\n\n    try {\n        const response = await fetch(\"/api/...\", {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: input })\n      });\n      const data = await response.json();\n      const botMessage = { sender: 'bot', text: data.response };\n      setMessages((prev) => [...prev, botMessage]);\n    } catch (err) {\n      setMessages((prev) => [...prev, { sender: 'bot', text: 'Error del servidor. IntÃ©ntalo mÃ¡s tarde.' }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"chat-widget\">\n      {open ? (\n        <div className=\"chat-box\">\n          <div className=\"chat-header\">\n            <span>Â¿En quÃ© podemos ayudarte?</span>\n            <button onClick={() => setOpen(false)}>âœ–</button>\n          </div>\n\n          <div className=\"chat-body\">\n            {messages.map((msg, i) => (\n              <div key={i} className={`chat-message ${msg.sender}`}>\n                {msg.text}\n              </div>\n            ))}\n            {loading && <div className=\"chat-message bot\">Escribiendo...</div>}\n          </div>\n\n          <div className=\"chat-footer\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n              placeholder=\"Escribe tu pregunta...\"\n            />\n            <button onClick={handleSend}>âž¤</button>\n          </div>\n        </div>\n      ) : (\n        <button className=\"chat-toggle\" onClick={() => setOpen(true)}>\n          ðŸ’¬\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default ChatWidget;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}